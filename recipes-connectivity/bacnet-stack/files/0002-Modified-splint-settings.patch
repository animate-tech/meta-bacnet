From 53f408b4138b1b517b61aa0734ba2ef035c385cb Mon Sep 17 00:00:00 2001
From: Bryan Evenson <bevenson@melinkcorp.com>
Date: Mon, 19 Aug 2013 10:07:19 -0400
Subject: [PATCH 02/02] Modified splint settings.

Signed-off-by: Bryan Evenson <bevenson@melinkcorp.com>
---
 splint.sh |   11 +++++++----
 1 file changed, 7 insertions(+), 4 deletions(-)

diff --git a/splint.sh b/splint.sh
index 58eb391..0882ace 100755
--- a/splint.sh
+++ b/splint.sh
@@ -5,18 +5,21 @@ SPLINT=/usr/bin/splint
 
 [ -x ${SPLINT} ] || exit 0
 
+DEFINES="-D__signed__=signed -D__gnuc_va_list=va_list"
 INCLUDES="-Iinclude -Idemo/object -Iports/linux"
-SETTINGS="-castfcnptr -fullinitblock -initallelements -weak +posixlib"
+SETTINGS="-castfcnptr -fullinitblock -initallelements -weak -warnposixheaders"
 
-if [ ! -x .splintrc ]
+if [ ! -e .splintrc ]
 then
-  echo ${INCLUDES} ${SETTINGS} > .splintrc
+  echo ${DEFINES} ${INCLUDES} ${SETTINGS} > .splintrc
 fi
 
 directory=${1-`pwd`}/src
+rm -f splint_output.txt
+touch splint_output.txt
 for filename in $( find $directory -name '*.c' )
 do
   echo splinting ${filename}
-  ${SPLINT} ${filename}
+  ${SPLINT} ${filename} >> splint_output.txt 2>&1
 done
 
-- 
1.7.9.5

